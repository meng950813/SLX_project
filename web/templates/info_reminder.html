{% extends 'base.html' %}

{% block title %}
    消息提醒
{% endblock %}
{% block styles %}
    <link rel="stylesheet" href="../static/css/bootstrap_v4.min.css">
    <script src="../static/js/bootstrap.min.js"></script>
    <script src="https://cdn.staticfile.org/popper.js/1.12.5/umd/popper.min.js"></script>
{% endblock %}

{% block main %}

   <div class="container" style="margin: 20px auto;">
        <div class="row">
            <button id="new-schedule" type="button" class="btn btn-primary ml-auto" data-target="#myModal"><i class="mdui-icon material-icons">&#xe3c9;</i>发送消息</button>
        </div>
        {% if unchecked_message|length > 0 %}
        <h3>未读信息：</h3>
        {% endif %}
        {% for i in unchecked_message %}
            <div class="alert alert-primary">
                <strong>{{ i['date'] }}<br></strong>
                <strong>{{ i['from_name'] }}：{{ i['detail'] }}</strong>
            </div>
        {% endfor %}

        {% if checked_message|length > 0 %}
        <h3>已读信息：</h3>
        {% endif %}
        {% for i in checked_message %}
            <div class="alert alert-secondary">
                <strong>{{ i['date'] }}<br></strong>
                <strong>{{ i['from_name'] }}：{{ i['detail'] }}</strong>
            </div>
        {% endfor %}

   </div>

    <!-- 模态框 -->
  <div class="modal fade" id="scheduleModal" >
    <div class="modal-dialog" >
      <div class="modal-content">

        <!-- 模态框主体 -->
        <div class="modal-body">
            <form>
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" id="csrf_token">
                <div class="input-group flex-nowrap">
                    <div class="input-group-prepend">
                        <span class="input-group-text">接受者</span>
                    </div>
                    <input id="receiver" name="receiver" class="form-control mod"  type="text" name="date">
                </div>
                <br>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text">详细内容</span>
                    </div>
                    <textarea name="content" id="content" class="form-control mod" aria-label="With textarea" rows="6"></textarea>
                </div>
            </form>

        </div>

        <!-- 模态框底部 -->
        <div class="modal-footer">
          <button type="button" class="btn btn-info" id="send_message" onclick="send_message($(this))">发送</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
        </div>

      </div>
    </div>
  </div>
{% endblock %}


{% block scripts %}
    <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script src="../static/js/bootstrap_v4.min.js"></script>
    <script src="../static/js/message.js"></script>
{% endblock %}